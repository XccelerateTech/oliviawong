<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="main.css">
    <script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <title>Flower Shop - bootstrap</title>
</head>
<body>
    <div class="container-fluid no-gutters">
        <nav class="navbar">
            <div class="navbar-brand">
               <img src="img/logo.png">
            </div>
        </nav>
        <div class="row-2 no-gutters"></div>
        <div class="overlayer">
            <h1>Flower Shop</h1>
            <h2 id="weather"></h2>
            <button onclick="getWeather()">Learn more</button>
        </div>
 
 
        <div class="row">
                    <div class="col-lg-3 col-md-6 col-sm-12">
                        <div class="row">
                            <div class="col-6">
                                <img class="icon" src="img/flower-icon.png">
                            </div>
                            <div class="col-6">
                                <p>Flowers for every kind of situtation</p>    
                            </div>        
                        </div>     
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12 ">
                            <div class="row">
                                <div class="col-6">
                                        <img class="icon" src="img/payment-icon.png">
                                </div>
                                <div class="col-6">
                                    <p>All major payments kinds accepted</p>    
                                </div>        
                            </div>     
                        </div>
                        <div class="col-lg-3 col-md-6 col-sm-12 ">
                                <div class="row">
                                    <div class="col-6">
                                            <img class="icon" src="img/phone-icon.png">
                                    </div>
                                    <div class="col-6">
                                        <p>Free consultation</p>    
                                    </div>        
                                </div>     
                            </div>            
                            <div class="col-lg-3 col-md-6 col-sm-12 ">
                                    <div class="row">
                                        <div class="col-6">
                                                <img class="icon" src="img/truck-icon.png">
                                        </div>
                                        <div class="col-6">
                                            <p>City wide delivery</p>    
                                        </div>        
                                    </div>     
                                </div>
        </div>    

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type='text/javascript'>
    

let ranNum = function(i){
    let num = Math.floor(Math.random()*i);
    return num;
};



    let getWeather = ()=> {
        let http = new XMLHttpRequest();
        // const apikey = "bf66190a1d640846e9b9920dc8046773";
        // const url = "api.openweathermap.org/data/2.5/weather?q=london";
        const cities = ['Paris','Hong%20Kong','London','Okinawa','Beijing',"Delhi", "Mumbai", "New%20York", "Istanbul", "Manila"];
        
        const city = cities[ranNum(cities.length-1)];
        //important to put http:// in front of the url to make sure it access the right server
        http.open("GET", `http://api.openweathermap.org/data/2.5/weather?q=${city}&apikey=bf66190a1d640846e9b9920dc8046773`)

        http.onreadystatechange = function(){
            if(http.readyState != XMLHttpRequest.DONE){
                return;
            } else if(http.status == 200){
                displayTemp(http.responseText, city)
            } else {
                console.log("error occurred" + http.status)
            }
        }
        http.send();
    }

    let displayTemp = (x,y) => {
    let data = JSON.parse(x); 
    let t = data.main.temp;
    celcius = t - 273
    celcius = celcius.toFixed(1);
    $("#weather").html(`Today's temperature in ${y} is ${celcius} C`);

}

getWeather();

// document.querySelector("#weather").innerHTML = 
  
    
    </script>

</body>
</html>